(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(30),i=n.n(r),s=(n(89),n(4)),o=n(10),l=n(14),d=n(79),j=n(82),u=n(117),b=n(114),h=n(78),O=n(0),p=function(){return Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"jumbotron",children:[Object(O.jsx)("h2",{children:"Rethinking the Outdoors | Renovating the Gear"}),Object(O.jsx)("button",{children:Object(O.jsx)(o.b,{to:"/shop",children:"Shop"})})]})})},m=function(){return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"About POCO."}),Object(O.jsx)("p",{children:"Perilous Outdoors Co. all started in 2016 when two friends were backpacking through the Chisos Mountains of West Texas. As warm scattered storms continued to hound Michael and Konner, they grew frustrated with constantly covering and uncovering themselves with rain gear. This is when the very first POCo. idea sprung. We\u2019re creating the very first rain jacket with an integrated pack cover built into the back of the jacket. This will allow you to hike right into the rain and not bat an eye! Our jacket is designed to simply be tossed over yourself and your pack, quick and easy. No wrestling with your heavy backpack to get it off, struggling to stretch the rain cover over your pack, then wrestling to get it back on. This jacket will offer complete protection to you and your pack. And we mean COMPLETE! With our jacket, you won\u2019t have to worry about your shoulder straps or hip belts soaking in water, possibly resulting in water seeping into the actual pack itself. We got those covered as well!"}),Object(O.jsx)("p",{children:"This patent-pending design is still in the works. But you can help us by supporting POCo. now, in the early stages! All proceeds go towards the production of this jacket and other gear we\u2019re innovating. "})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Meet The Founders"}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-6"}),Object(O.jsx)("div",{className:"col-6"})]})]})]})},x=n(8);function f(e,t){return 1===t?e:e+"s"}function g(e,t,n){return new Promise((function(c,a){var r,i,s,o=window.indexedDB.open("shop-shop",1);o.onupgradeneeded=function(e){var t=o.result;t.createObjectStore("products",{keyPath:"_id"}),t.createObjectStore("categories",{keyPath:"_id"}),t.createObjectStore("cart",{keyPath:"_id"})},o.onerror=function(e){console.log("There was an error")},o.onsuccess=function(a){switch(r=o.result,i=r.transaction(e,"readwrite"),s=i.objectStore(e),r.onerror=function(e){console.log("error",e)},t){case"put":s.put(n),c(n);break;case"get":var l=s.getAll();l.onsuccess=function(){c(l.result)};break;case"delete":s.delete(n._id);break;default:console.log("No valid method")}i.oncomplete=function(){r.close()}}}))}var v=n(7),y=n(31),w="UPDATE_PRODUCTS",k="ADD_TO_CART",N="ADD_MULTIPLE_TO_CART",_="REMOVE_FROM_CART",C="UPDATE_CART_QUANTITY",T="TOGGLE_CART",E="UPDATE_CATEGORIES",S="UPDATE_CURRENT_CATEGORY",A=function(e,t){switch(t.type){case w:return Object(s.a)(Object(s.a)({},e),{},{products:Object(y.a)(t.products)});case k:return Object(s.a)(Object(s.a)({},e),{},{cartOpen:!0,cart:[].concat(Object(y.a)(e.cart),[t.product])});case N:return Object(s.a)(Object(s.a)({},e),{},{cart:[].concat(Object(y.a)(e.cart),Object(y.a)(t.products))});case C:return Object(s.a)(Object(s.a)({},e),{},{cartOpen:!0,cart:e.cart.map((function(e){return t._id===e._id&&(e.purchaseQuantity=t.purchaseQuantity),e}))});case _:var n=e.cart.filter((function(e){return e._id!==t._id}));return Object(s.a)(Object(s.a)({},e),{},{cartOpen:n.length>0,cart:n});case"CLEAR_CART":return Object(s.a)(Object(s.a)({},e),{},{cartOpen:!1,cart:[]});case T:return Object(s.a)(Object(s.a)({},e),{},{cartOpen:!e.cartOpen});case E:return Object(s.a)(Object(s.a)({},e),{},{categories:Object(y.a)(t.categories)});case S:return Object(s.a)(Object(s.a)({},e),{},{currentCategory:t.currentCategory});default:return e}};var P=["value"],I=Object(c.createContext)(),$=I.Provider,D=function(e){e.value;var t,n=Object(v.a)(e,P),a=(t={products:[],cart:[],cartOpen:!1,categories:[],currentCategory:""},Object(c.useReducer)(A,t)),r=Object(x.a)(a,2),i=r[0],o=r[1];return Object(O.jsx)($,Object(s.a)({value:[i,o]},n))},Q=function(){return Object(c.useContext)(I)};var R,F,L,U,W,q=function(e){var t=Q(),n=Object(x.a)(t,2),c=n[0],a=n[1],r=e.image,i=e.name,l=e._id,d=e.price,j=e.quantity,u=c.cart;return Object(O.jsxs)("div",{className:"card px-1 py-1",children:[Object(O.jsxs)(o.b,{to:"/products/".concat(l),children:[Object(O.jsx)("img",{alt:i,src:"/images/".concat(r)}),Object(O.jsx)("p",{children:i})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[j," ",f("item",j)," in stock"]}),Object(O.jsxs)("span",{children:["$",d]})]}),Object(O.jsx)("button",{onClick:function(){var t=u.find((function(e){return e._id===l}));t?(a({type:C,_id:l,purchaseQuantity:parseInt(t.purchaseQuantity)+1}),g("cart","put",Object(s.a)(Object(s.a)({},t),{},{purchaseQuantity:parseInt(t.purchaseQuantity)+1}))):(a({type:k,product:Object(s.a)(Object(s.a)({},e),{},{purchaseQuantity:1})}),g("cart","put",Object(s.a)(Object(s.a)({},e),{},{purchaseQuantity:1})))},children:"Add to cart"})]})},M=n(72),B=n(32),G=n(116),Y=Object(G.a)(R||(R=Object(B.a)(["\n  query getProducts($category: ID) {\n    products(category: $category) {\n      _id\n      name\n      description\n      price\n      quantity\n      image\n      category {\n        _id\n      }\n    }\n  }\n"]))),H=Object(G.a)(F||(F=Object(B.a)(["\n  query getCheckout($products: [ID]!) {\n    checkout(products: $products) {\n      session\n    }\n  }\n"]))),J=(Object(G.a)(L||(L=Object(B.a)(["\n  {\n    products {\n      _id\n      name\n      description\n      price\n      quantity\n      category {\n        name\n      }\n    }\n  }\n"]))),Object(G.a)(U||(U=Object(B.a)(["\n  {\n    categories {\n      _id\n      name\n    }\n  }\n"])))),z=Object(G.a)(W||(W=Object(B.a)(["\n  {\n    user {\n      firstName\n      lastName\n      orders {\n        _id\n        purchaseDate\n        products {\n          _id\n          name\n          description\n          price\n          quantity\n          image\n        }\n      }\n    }\n  }\n"]))),K=n.p+"static/media/spinner.689d9a07.gif";var V=function(){var e=Q(),t=Object(x.a)(e,2),n=t[0],a=t[1],r=n.currentCategory,i=Object(M.a)(Y),s=i.loading,o=i.data;return Object(c.useEffect)((function(){o?(a({type:w,products:o.products}),o.products.forEach((function(e){g("products","put",e)}))):s||g("products","get").then((function(e){a({type:w,products:e})}))}),[o,s,a]),Object(O.jsxs)("div",{className:"my-2",children:[Object(O.jsx)("h2",{children:"Our Products:"}),n.products.length?Object(O.jsx)("div",{className:"flex-row",children:(r?n.products.filter((function(e){return e.category._id===r})):n.products).map((function(e){return Object(O.jsx)(q,{_id:e._id,image:e.image,name:e.name,price:e.price,quantity:e.quantity},e._id)}))}):Object(O.jsx)("h3",{children:"You haven't added any products yet!"}),s?Object(O.jsx)("img",{src:K,alt:"loading"}):null]})};var X=function(){var e=Q(),t=Object(x.a)(e,2),n=t[0],a=t[1],r=n.categories,i=Object(M.a)(J),s=i.loading,o=i.data;return Object(c.useEffect)((function(){o?(a({type:E,categories:o.categories}),o.categories.forEach((function(e){g("categories","put",e)}))):s||g("categories","get").then((function(e){a({type:E,categories:e})}))}),[o,s,a]),Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Choose a Category:"}),r.map((function(e){return Object(O.jsx)("button",{onClick:function(){var t;t=e._id,a({type:S,currentCategory:t})},children:e.name},e._id)}))]})},Z=n(35),ee=n(22),te=n.n(ee),ne=n(74),ce=n(111),ae=function(e){var t=e.item,n=Q(),c=Object(x.a)(n,2)[1];return Object(O.jsxs)("div",{className:"flex-row",children:[Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:"/images/".concat(t.image),alt:""})}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[t.name,", $",t.price]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"Qty:"}),Object(O.jsx)("input",{type:"number",placeholder:"1",value:t.purchaseQuantity,onChange:function(e){var n=e.target.value;"0"===n?(c({type:_,_id:t._id}),g("cart","delete",Object(s.a)({},t))):(c({type:C,_id:t._id,purchaseQuantity:parseInt(n)}),g("cart","put",Object(s.a)(Object(s.a)({},t),{},{purchaseQuantity:parseInt(n)})))}}),Object(O.jsx)("span",{role:"img","aria-label":"trash",onClick:function(){return function(e){c({type:_,_id:e._id}),g("cart","delete",Object(s.a)({},e))}(t)},children:"\ud83d\uddd1\ufe0f"})]})]})]})},re=n(40),ie=n(41),se=n(62),oe=n.n(se),le=new(function(){function e(){Object(re.a)(this,e)}return Object(ie.a)(e,[{key:"getProfile",value:function(){return oe()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return oe()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),de=(n(99),Object(ne.a)("pk_test_TYooMQauvdEDq54NiTphI7jx")),je=function(){var e=Q(),t=Object(x.a)(e,2),n=t[0],a=t[1],r=Object(ce.a)(H),i=Object(x.a)(r,2),s=i[0],o=i[1].data;function l(){a({type:T})}return Object(c.useEffect)((function(){o&&de.then((function(e){e.redirectToCheckout({sessionId:o.checkout.session})}))}),[o]),Object(c.useEffect)((function(){function e(){return(e=Object(Z.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("cart","get");case 2:t=e.sent,a({type:N,products:Object(y.a)(t)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.cart.length||function(){e.apply(this,arguments)}()}),[n.cart.length,a]),n.cartOpen?Object(O.jsxs)("div",{className:"cart",children:[Object(O.jsx)("div",{className:"close",onClick:l,children:"[close]"}),Object(O.jsx)("h2",{children:"Shopping Cart"}),n.cart.length?Object(O.jsxs)("div",{children:[n.cart.map((function(e){return Object(O.jsx)(ae,{item:e},e._id)})),Object(O.jsxs)("div",{className:"flex-row space-between",children:[Object(O.jsxs)("strong",{children:["Total: $",function(){var e=0;return n.cart.forEach((function(t){e+=t.price*t.purchaseQuantity})),e.toFixed(2)}()]}),le.loggedIn()?Object(O.jsx)("button",{onClick:function(){var e=[];n.cart.forEach((function(t){for(var n=0;n<t.purchaseQuantity;n++)e.push(t._id)})),s({variables:{products:e}})},children:"Checkout"}):Object(O.jsx)("span",{children:"(log in to check out)"})]})]}):Object(O.jsxs)("h3",{children:[Object(O.jsx)("span",{role:"img","aria-label":"shocked",children:"\ud83d\ude31"}),"You haven't added anything to your cart yet!"]})]}):Object(O.jsx)("div",{className:"cart-closed",onClick:l,children:Object(O.jsx)("span",{role:"img","aria-label":"trash",children:"\ud83d\uded2"})})},ue=function(){return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(X,{}),Object(O.jsx)(V,{}),Object(O.jsx)(je,{})]})};var be=function(){var e=Q(),t=Object(x.a)(e,2),n=t[0],a=t[1],r=Object(l.f)().id,i=Object(c.useState)({}),d=Object(x.a)(i,2),j=d[0],u=d[1],b=Object(M.a)(Y),h=b.loading,p=b.data,m=n.products,f=n.cart;return Object(c.useEffect)((function(){m.length?u(m.find((function(e){return e._id===r}))):p?(a({type:w,products:p.products}),p.products.forEach((function(e){g("products","put",e)}))):h||g("products","get").then((function(e){a({type:w,products:e})}))}),[m,p,h,a,r]),Object(O.jsxs)(O.Fragment,{children:[j&&f?Object(O.jsxs)("div",{className:"container my-1",children:[Object(O.jsx)(o.b,{to:"/",children:"\u2190 Back to Products"}),Object(O.jsx)("h2",{children:j.name}),Object(O.jsx)("p",{children:j.description}),Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:"Price:"}),"$",j.price," ",Object(O.jsx)("button",{onClick:function(){var e=f.find((function(e){return e._id===r}));e?(a({type:C,_id:r,purchaseQuantity:parseInt(e.purchaseQuantity)+1}),g("cart","put",Object(s.a)(Object(s.a)({},e),{},{purchaseQuantity:parseInt(e.purchaseQuantity)+1}))):(a({type:k,product:Object(s.a)(Object(s.a)({},j),{},{purchaseQuantity:1})}),g("cart","put",Object(s.a)(Object(s.a)({},j),{},{purchaseQuantity:1})))},children:"Add to Cart"}),Object(O.jsx)("button",{disabled:!f.find((function(e){return e._id===j._id})),onClick:function(){a({type:_,_id:j._id}),g("cart","delete",Object(s.a)({},j))},children:"Remove from Cart"})]}),Object(O.jsx)("img",{src:"/images/".concat(j.image),alt:j.name})]}):null,h?Object(O.jsx)("img",{src:K,alt:"loading"}):null,Object(O.jsx)(je,{})]})};var he,Oe,pe,me=function(e){var t=e.children;return Object(O.jsx)("div",{style:{height:560,clear:"both",paddingTop:120,textAlign:"center"},children:t})},xe=function(){return Object(O.jsx)("div",{children:Object(O.jsxs)(me,{children:[Object(O.jsx)("h1",{children:"404 Page Not Found"}),Object(O.jsx)("h1",{children:Object(O.jsx)("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji",children:"\ud83d\ude44"})})]})})},fe=n(12),ge=n(112),ve=Object(G.a)(he||(he=Object(B.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),ye=Object(G.a)(Oe||(Oe=Object(B.a)(["\n  mutation addOrder($products: [ID]!) {\n    addOrder(products: $products) {\n      purchaseDate\n      products {\n        _id\n        name\n        description\n        price\n        quantity\n        category {\n          name\n        }\n      }\n    }\n  }\n"]))),we=Object(G.a)(pe||(pe=Object(B.a)(["\n  mutation addUser(\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"])));var ke=function(e){var t=Object(c.useState)({email:"",password:""}),n=Object(x.a)(t,2),a=n[0],r=n[1],i=Object(ge.a)(ve),l=Object(x.a)(i,2),d=l[0],j=l[1].error,u=function(){var e=Object(Z.a)(te.a.mark((function e(t){var n,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d({variables:{email:a.email,password:a.password}});case 4:n=e.sent,c=n.data.login.token,le.login(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.target,n=t.name,c=t.value;r(Object(s.a)(Object(s.a)({},a),{},Object(fe.a)({},n,c)))};return Object(O.jsxs)("div",{className:"container my-1",children:[Object(O.jsx)(o.b,{to:"/signup",children:"\u2190 Go to Signup"}),Object(O.jsx)("h2",{children:"Login"}),Object(O.jsxs)("form",{onSubmit:u,children:[Object(O.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email address:"}),Object(O.jsx)("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:b})]}),Object(O.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(O.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(O.jsx)("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:b})]}),j?Object(O.jsx)("div",{children:Object(O.jsx)("p",{className:"error-text",children:"The provided credentials are incorrect"})}):null,Object(O.jsx)("div",{className:"flex-row flex-end",children:Object(O.jsx)("button",{type:"submit",children:"Submit"})})]})]})};var Ne=function(e){var t=Object(c.useState)({email:"",password:""}),n=Object(x.a)(t,2),a=n[0],r=n[1],i=Object(ge.a)(we),l=Object(x.a)(i,1)[0],d=function(){var e=Object(Z.a)(te.a.mark((function e(t){var n,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,l({variables:{email:a.email,password:a.password,firstName:a.firstName,lastName:a.lastName}});case 3:n=e.sent,c=n.data.addUser.token,le.login(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t=e.target,n=t.name,c=t.value;r(Object(s.a)(Object(s.a)({},a),{},Object(fe.a)({},n,c)))};return Object(O.jsxs)("div",{className:"container my-1",children:[Object(O.jsx)(o.b,{to:"/login",children:"\u2190 Go to Login"}),Object(O.jsx)("h2",{children:"Signup"}),Object(O.jsxs)("form",{onSubmit:d,children:[Object(O.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(O.jsx)("label",{htmlFor:"firstName",children:"First Name:"}),Object(O.jsx)("input",{placeholder:"First",name:"firstName",type:"firstName",id:"firstName",onChange:j})]}),Object(O.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(O.jsx)("label",{htmlFor:"lastName",children:"Last Name:"}),Object(O.jsx)("input",{placeholder:"Last",name:"lastName",type:"lastName",id:"lastName",onChange:j})]}),Object(O.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(O.jsx)("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:j})]}),Object(O.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(O.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(O.jsx)("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:j})]}),Object(O.jsx)("div",{className:"flex-row flex-end",children:Object(O.jsx)("button",{type:"submit",children:"Submit"})})]})]})},_e=n(115),Ce=n(113);var Te=function(){return Object(O.jsx)(_e.a,{children:Object(O.jsxs)(Ce.a,{fluid:!0,children:[Object(O.jsx)(_e.a.Brand,{as:o.b,to:"/",children:"Perilous Outdoors Co."}),Object(O.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:le.loggedIn()?Object(O.jsxs)("ul",{className:"flex-row",children:[Object(O.jsx)("li",{className:"mx-1",children:Object(O.jsx)(o.b,{to:"/orderHistory",children:"Order History"})}),Object(O.jsx)("li",{className:"mx-1",children:Object(O.jsx)("a",{href:"/",onClick:function(){return le.logout()},children:"Logout"})})]}):Object(O.jsxs)("ul",{className:"flex-row",children:[Object(O.jsx)("li",{className:"mx-1",children:Object(O.jsx)(o.b,{to:"/about",children:"About"})}),Object(O.jsx)("li",{className:"mx-1",children:Object(O.jsx)(o.b,{to:"/shop",children:"Shop"})}),Object(O.jsx)("li",{className:"mx-1",children:Object(O.jsx)(o.b,{to:"/signup",children:"Signup"})}),Object(O.jsx)("li",{className:"mx-1",children:Object(O.jsx)(o.b,{to:"/login",children:"Login"})})]})})]})})};var Ee=function(){return Object(O.jsx)("footer",{className:"page-footer black",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col l6 m6 s6 center-align",children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(o.b,{to:"/about",children:"About"})}),Object(O.jsx)("li",{children:Object(O.jsx)(o.b,{to:"/shop",children:"Shop"})}),Object(O.jsx)("li",{children:Object(O.jsx)(o.b,{to:"/login",children:"Login"})})]})}),Object(O.jsx)("div",{className:"col l6 m6 s6 center-align",children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"mailto:perilousoutdoorsco@gmail.com",children:"Email"})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"https://www.facebook.com/perilous.outdoors.co",children:"Facebook"})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"https://www.instagram.com/perilous.outdoors.co/",children:"Instagram"})})]})})]})})})};var Se=function(){var e=Object(ge.a)(ye),t=Object(x.a)(e,1)[0];return Object(c.useEffect)((function(){function e(){return(e=Object(Z.a)(te.a.mark((function e(){var n,c,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("cart","get");case 2:if(n=e.sent,!(c=n.map((function(e){return e._id}))).length){e.next=11;break}return e.next=7,t({variables:{products:c}});case 7:a=e.sent,r=a.data,r.addOrder.products.forEach((function(e){g("cart","delete",e)}));case 11:setTimeout((function(){window.location.assign("/")}),3e3);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(O.jsx)("div",{children:Object(O.jsxs)(me,{children:[Object(O.jsx)("h1",{children:"Success!"}),Object(O.jsx)("h2",{children:"Thank you for your purchase!"}),Object(O.jsx)("h2",{children:"You will now be redirected to the home page"})]})})};var Ae=function(){var e,t=Object(M.a)(z).data;return t&&(e=t.user),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"container my-1",children:[Object(O.jsx)(o.b,{to:"/",children:"\u2190 Back to Products"}),e?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("h2",{children:["Order History for ",e.firstName," ",e.lastName]}),e.orders.map((function(e){return Object(O.jsxs)("div",{className:"my-2",children:[Object(O.jsx)("h3",{children:new Date(parseInt(e.purchaseDate)).toLocaleDateString()}),Object(O.jsx)("div",{className:"flex-row",children:e.products.map((function(e,t){var n=e._id,c=e.image,a=e.name,r=e.price;return Object(O.jsxs)("div",{className:"card px-1 py-1",children:[Object(O.jsxs)(o.b,{to:"/products/".concat(n),children:[Object(O.jsx)("img",{alt:a,src:"/images/".concat(c)}),Object(O.jsx)("p",{children:a})]}),Object(O.jsx)("div",{children:Object(O.jsxs)("span",{children:["$",r]})})]},t)}))})]},e._id)}))]}):null]})})},Pe=Object(d.a)({uri:"/graphql"}),Ie=Object(h.a)((function(e,t){var n=t.headers,c=localStorage.getItem("id_token");return{headers:Object(s.a)(Object(s.a)({},n),{},{authorization:c?"Bearer ".concat(c):""})}})),$e=new j.a({link:Ie.concat(Pe),cache:new u.a});var De=function(){return Object(O.jsx)(b.a,{client:$e,children:Object(O.jsx)(o.a,{children:Object(O.jsx)("div",{children:Object(O.jsxs)(D,{children:[Object(O.jsx)(Te,{}),Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{exact:!0,path:"/",component:p}),Object(O.jsx)(l.a,{exact:!0,path:"/about",component:m}),Object(O.jsx)(l.a,{exact:!0,path:"/shop",component:ue}),Object(O.jsx)(l.a,{exact:!0,path:"/login",component:ke}),Object(O.jsx)(l.a,{exact:!0,path:"/signup",component:Ne}),Object(O.jsx)(l.a,{exact:!0,path:"/success",component:Se}),Object(O.jsx)(l.a,{exact:!0,path:"/orderHistory",component:Ae}),Object(O.jsx)(l.a,{exact:!0,path:"/products/:id",component:be}),Object(O.jsx)(l.a,{component:xe})]}),Object(O.jsx)(Ee,{})]})})})})},Qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(100);i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(De,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Qe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Re(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Re(t,e)}))}}()},89:function(e,t,n){},99:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.6b058745.chunk.js.map